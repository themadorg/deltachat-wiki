---
title: Referencia del almacenamiento de blobs en S3
description: Referencia para el módulo storage.blob.s3, que permite el almacenamiento de los cuerpos de los mensajes en un almacenamiento en la nube compatible con S3.
category: Técnico
---

# Amazon S3

El módulo storage.blob.s3 almacena los cuerpos de los mensajes en un bucket de un almacenamiento compatible con S3.

```
storage.blob.s3 {
    endpoint play.min.io
    secure yes
    access_key "Q3AM3UQ867SPQQA43P2F"
    secret_key "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG"
    bucket maddy-test

    # opcional
    region eu-central-1
    object_prefix maddy/
    creds access_key
}
```

Ejemplo:

```
storage.imapsql buzones_locales {
    ...
    msg_store s3 {
        endpoint s3.amazonaws.com
        access_key "..."
        secret_key "..."
        bucket maddy-messages
        region us-west-2
        creds access_key
    }
}
```

## Directivas de configuración

### endpoint _dirección:puerto_

**Requerido**.

Punto final (endpoint) raíz de S3. P. ej., `s3.amazonaws.com`

---

### secure _booleano_
Por defecto: `yes`

Indica si se debe utilizar TLS.

---

### access_key _cadena_<br>secret_key _cadena_

**Requerido**.

Credenciales estáticas de S3.

---

### bucket _nombre_

**Requerido**.

Nombre del bucket de S3. El bucket debe existir y tener permisos de lectura y escritura.

---

### region _cadena_
Por defecto: no establecido

Ubicación del bucket de S3. Puede llamarse "endpoint" en algunos manuales.

---

### object_prefix _cadena_
Por defecto: cadena vacía

Cadena que se añade a todas las claves almacenadas por maddy.

Puede ser útil cuando se utiliza S3 como un sistema de archivos.

---

### creds `access_key` | `file_minio` | `file_aws` | `iam`
Por defecto: `access_key`

Credenciales a utilizar para acceder al bucket de S3.

Tipos de credenciales:

 - `access_key`: utiliza la clave de acceso de AWS y la clave de acceso secreta 
 - `file_minio`: utiliza las credenciales para Minio presentes en ~/.mc/config.json
 - `file_aws`: utiliza las credenciales para AWS S3 presentes en ~/.aws/credentials
 - `iam`: utiliza el perfil de instancia IAM de AWS para las credenciales.

Por defecto, se utiliza access_key con la clave de acceso y la clave de acceso secreta presentes en la configuración.
