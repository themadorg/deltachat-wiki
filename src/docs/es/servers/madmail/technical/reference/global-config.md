---
title: Configuración global
category: Referencia
---

# Directivas de configuración global

Estas directivas pueden especificarse fuera de cualquier bloque de configuración y se aplican a todos los módulos.

Algunas directivas pueden anularse para cada módulo (por ejemplo, hostname).

### state_dir _ruta_
Por defecto: `/var/lib/maddy`

La ruta al directorio de estado. Este directorio se utilizará para almacenar todos los datos persistentes y debe tener permisos de escritura.

---

### runtime_dir _ruta_
Por defecto: `/run/maddy`

La ruta al directorio de ejecución. Se utiliza para sockets Unix y otros objetos temporales. Debe tener permisos de escritura.

---

### hostname _dominio_ 
Por defecto: no especificado

Nombre de host de Internet de este servidor de correo. Normalmente se utiliza el FQDN. Se recomienda asegurarse de que el dominio especificado aquí se resuelva a la IP pública del servidor.

---

### auth_map _referencia-módulo_
Por defecto: `identity`

Utiliza la tabla especificada para traducir los nombres de usuario de SASL antes de pasarlos al proveedor de autenticación.

Antes de que se busque el nombre de usuario, este se normaliza utilizando la función definida por `auth_map_normalize`.

Ten en cuenta que `auth_map` no afecta al nombre de la cuenta de almacenamiento utilizado. Probablemente también deberías usar `storage_map` en el bloque de configuración IMAP para gestionar esto.

Esta directiva es útil si el proveedor de autenticación utilizado no admite el uso de correos electrónicos como nombres de usuario, pero aun así quieres que los usuarios tengan buzones separados en dominios separados. En este caso, úsala con la tabla `email_localpart`:

```
    auth_map email_localpart
```

Con esta configuración, `usuario@ejemplo.org` y `usuario@ejemplo.com` utilizarán las credenciales de `usuario` al autenticarse, pero accederán a los buzones `usuario@ejemplo.org` y `usuario@ejemplo.com` correspondientemente. Si también quieres aceptar `usuario` como nombre de usuario, utiliza `auth_map email_localpart_optional`.

Si quieres que `usuario@ejemplo.org` y `usuario@ejemplo.com` tengan el mismo buzón, establece también `storage_map` en el bloque de configuración IMAP para usar `email_localpart` (o `email_localpart_optional` si quieres aceptar también solo "usuario"):

```
    storage_map email_localpart
```

En este caso tendrás que crear las cuentas de almacenamiento sin la parte del dominio en el nombre:

```
maddy imap-acct create usuario # en lugar de usuario@ejemplo.org
```

---

### auth_map_normalize _función_
Por defecto: `auto`

Función de normalización a aplicar a los nombres de usuario de SASL antes de asignarlos a las cuentas de almacenamiento.

Opciones disponibles:

- `auto` – `precis_casefold_email` para correos válidos, `precis_casefold` en caso contrario.
- `precis_casefold_email` – perfil PRECIS UsernameCaseMapped + forma U-labels para el dominio.
- `precis_casefold` – perfil PRECIS UsernameCaseMapped para toda la cadena.
- `precis_email` – perfil PRECIS UsernameCasePreserved + forma U-labels para el dominio.
- `precis` – perfil PRECIS UsernameCasePreserved para toda la cadena.
- `casefold` – convertir a minúsculas.
- `noop` – nada.

---

### autogenerated_msg_domain _dominio_
Por defecto: no especificado

Dominio que se utiliza en el campo From para los mensajes generados automáticamente (como las Notificaciones de Estado de Entrega).

---

### tls `file` _archivo-cert_ _archivo-clave_ | _referencia-módulo_ | `off`
Por defecto: no especificado

Certificado TLS por defecto para todos los puntos finales (endpoints).

Debe estar presente en todos los bloques de configuración de los módulos de punto final o como directiva global.

También puedes especificar otras opciones de configuración, como las suites de cifrado (cipher suites) y la versión de TLS. Consulta maddy-tls(5) para más detalles. Madmail utiliza suites de cifrado y versiones de TLS razonables por defecto, por lo que generalmente no tienes que preocuparte por ello.

---

### tls_client
Por defecto: no especificado

Este es un bloque opcional que especifica varias opciones relacionadas con TLS para utilizar al realizar conexiones de salida. Consulta la configuración del cliente TLS para obtener detalles sobre las directivas que se pueden utilizar en él. Madmail utiliza suites de cifrado y versiones de TLS razonables por defecto, por lo que generalmente no tienes que preocuparte por ello.

---

### log _objetivos..._ | `off`
Por defecto: `stderr`

Escribe el registro en uno o más "objetivos" (targets).

El objetivo puede ser uno de los siguientes:

- `stderr` – Escribe los registros en stderr.
- `stderr_ts` – Escribe los registros en stderr con marcas de tiempo.
- `syslog` – Envía los registros al demonio syslog local.
- _ruta del archivo_ – Escribe (añade) los registros al archivo.

Ejemplo:

```
log syslog /var/log/maddy.log
```

**Nota:** Madmail no realiza la rotación de los archivos de registro, esa es la tarea del demonio logrotate. Envía un SIGUSR1 al proceso de Madmail para que vuelva a abrir los archivos de registro.

---

### debug _booleano_ 
Por defecto: `no`

Activa el registro detallado para todos los módulos. No necesitas esto a menos que estés informando de un error.
