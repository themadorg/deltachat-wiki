---
title: مرجع احراز هویت خارجی
description: مرجع ماژول auth.external که به Madmail اجازه می‌دهد از فایل‌های اجرایی کمکی خارجی برای احراز هویت استفاده کند.
category: فنی
---

# دستور سیستمی (System command)

ماژول `auth.external` برای احراز هویت با استفاده از یک فایل اجرایی کمکی خارجی استفاده می‌شود. این ماژول به دنبال فایلی به نام `maddy-auth-helper` در مسیر $PATH و دایرکتوری libexec می‌گردد و از آن برای احراز هویت با جفت نام کاربری/رمز عبور استفاده می‌کند.

پروتکل مورد استفاده بسیار ساده است:
برنامه برای هر بار احراز هویت اجرا می‌شود. نام کاربری و رمز عبور در ورودی استاندارد (stdin) نوشته شده و در انتهای هر کدام یک کاراکتر خط جدید (`\n`) اضافه می‌شود. اگر فایل اجرایی با کد وضعیت ۰ خارج شود، احراز هویت موفقیت‌آمیز تلقی می‌شود. اگر کد وضعیت ۱ باشد، احراز هویت شکست خورده است. اگر کد وضعیت ۲ باشد، خطای نامرتبط دیگری رخ داده است. اطلاعات اضافی باید در خروجی خطای استاندارد (stderr) نوشته شود.

```hcl
auth.external {
    helper /usr/bin/ldap-helper
    perdomain no
    domains example.org
}
```

## دستورالعمل‌های پیکربندی

### `helper [file_path]`

**الزامی.** <br>
محل فایل اجرایی کمکی.

---

### `perdomain [boolean]`
پیش‌فرض: `no`

بخش دامنه‌ی نام کاربری را هنگام احراز هویت حذف نمی‌کند و وجود آن را الزامی می‌داند. در صورتی که بخواهید `user@domain1` و `user@domain2` حساب‌های متفاوتی باشند، می‌توانید از این گزینه استفاده کنید.

---

### `domains [domains...]`
پیش‌فرض: مشخص نشده است

دامنه‌هایی که باید در نام کاربری در طول احراز هویت مجاز باشند.

برای مثال، اگر `domains` روی `domain1 domain2` تنظیم شده باشد، علاوه بر نام کاربری معمولی، نام‌های `username@domain1` و `username@domain2` نیز به‌عنوان نام‌های ورود معتبر پذیرفته می‌شوند.

اگر بدون `perdomain` استفاده شود، بخش دامنه قبل از بررسی توسط مکانیزم احراز هویت حذف می‌شود. اگر `perdomain` تنظیم شده باشد، `domains` نیز باید حتماً تنظیم شود و بخش دامنه قبل از بررسی حذف **نخواهد شد**.
 Victorian
