---
title: مرجع ذخیره‌سازی بلاب S3
description: مرجع ماژول storage.blob.s3 که امکان ذخیره‌سازی بدنه‌ی پیام‌ها را در فضای ابری سازگار با S3 فراهم می‌کند.
category: فنی
---

# Amazon S3

ماژول `storage.blob.s3` بدنه‌ی پیام‌ها را در یک باکت (bucket) روی فضای ذخیره‌سازی سازگار با S3 ذخیره می‌کند.

```hcl
storage.blob.s3 {
    endpoint play.min.io
    secure yes
    access_key "Q3AM3UQ867SPQQA43P2F"
    secret_key "zuf+tfteSlswRu7BJ86wekitnifILbZam1KYY3TG"
    bucket maddy-test

    # اختیاری
    region eu-central-1
    object_prefix maddy/
    creds access_key
}
```

مثال:

```hcl
storage.imapsql local_mailboxes {
    ...
    msg_store s3 {
        endpoint s3.amazonaws.com
        access_key "..."
        secret_key "..."
        bucket maddy-messages
        region us-west-2
        creds access_key
    }
}
```

## دستورالعمل‌های پیکربندی

### `endpoint [address:port]`

**الزامی**.

نقطه انتهایی اصلی S3. برای مثال: `s3.amazonaws.com`

---

### `secure [boolean]`
پیش‌فرض: `yes`

تعیین می‌کند که آیا از TLS استفاده شود یا خیر.

---

### `access_key [string]` <br> `secret_key [string]`

**الزامی**.

اطلاعات شناسایی استاتیک S3.

---

### `bucket [name]`

**الزامی**.

نام باکت S3. باکت باید از قبل وجود داشته باشد و دارای دسترسی خواندن و نوشتن باشد.

---

### `region [string]`
پیش‌فرض: تنظیم نشده است

محل جغرافیایی باکت S3. در برخی از راهنماها ممکن است "endpoint" نامیده شود.

---

### `object_prefix [string]`
پیش‌فرض: رشته خالی

رشته‌ای که به تمام کلیدهای ذخیره شده توسط maddy اضافه می‌شود.

زمانی که از S3 به‌عنوان یک سیستم فایل استفاده می‌شود، می‌تواند مفید باشد.

---

### `creds access_key | file_minio | file_aws | iam`
پیش‌فرض: `access_key`

اطلاعات شناسایی مورد استفاده برای دسترسی به باکت S3.

انواع اطلاعات شناسایی:

 - `access_key`: استفاده از AWS access key و secret access key.
 - `file_minio`: استفاده از اطلاعات شناسایی Minio موجود در مسیر `~/.mc/config.json`.
 - `file_aws`: استفاده از اطلاعات شناسایی AWS S3 موجود در مسیر `~/.aws/credentials`.
 - `iam`: استفاده از پروفایل AWS IAM instance برای اطلاعات شناسایی.

به‌طور پیش‌فرض، از `access_key` به همراه مقادیر موجود در پیکربندی استفاده می‌شود.
 Victorian
