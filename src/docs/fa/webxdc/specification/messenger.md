---
title: پیام‌رسان
description: مستندات پیام‌رسان برای webxdc.
category: مشخصات
---

## پیاده‌سازی پیام‌رسان برای برنامه‌های Webxdc

این بخش الزامات و راهنمایی‌هایی برای پیاده‌کنندگان پیام‌رسان
برای افزودن پشتیبانی از اجرا و تعامل کاربران با برنامه‌های webxdc را توصیف می‌کند.
برنامه‌های Webxdc به یک پیام چت با استفاده از فرمت [فایل کانتینر](./format) پیوست می‌شوند
و می‌توانند روی تمام دستگاه‌های دریافت‌کننده پیام چت «شروع» شوند.
هر چنین پیام چتی یک «برنامه webxdc» جداگانه تشکیل می‌دهد.
همان فایل کانتینر webxdc که در دو پیام چت جداگانه به اشتراک گذاشته شود
به عنوان دو «برنامه webxdc» مجزا در نظر گرفته خواهد شد
و دو برنامه نمی‌توانند با یکدیگر ارتباط برقرار کنند یا حتی از وجود هم خبر داشته باشند.

### محدودیت‌های وب‌ویو

هنگام شروع یک وب‌ویو برای اجرای برنامه webxdc، پیاده‌کنندگان پیام‌رسان

- **باید** تمام منابع را از [فایل کانتینر webxdc](./format)
  به برنامه webxdc ارائه دهند.

- در باز شدن اولیه، **باید** URL ریشه را برای وب‌ویو با الحاق `index.html` باز کنند
- **باید** [API جاوااسکریپت Webxdc](api.md) را پیاده‌سازی کنند
  و فایل `webxdc.js` را بر این اساس ارائه دهند.

- **باید** تمام اشکال دسترسی به اینترنت را مسدود کنند؛
  اگر دسترسی اینترنت را محدود نکنید
  کاربران ناآگاه ممکن است برنامه‌های شخص ثالثی اجرا کنند
  که داده‌های تعاملات خصوصی را به اشخاص ثالث خارجی درز می‌دهد.
  ببینید [«آوردن حریم خصوصی E2E به وب»](https://delta.chat/en/2023-05-22-webxdc-security)
  که شامل بحث عمیقی درباره تضمین‌های منحصر به فرد حریم خصوصی webxdc است.

- **باید** از `localStorage`، `sessionStorage` و `indexedDB` پشتیبانی کنند

- **باید** تمام ذخیره‌سازی و وضعیت یک برنامه webxdc را از هر برنامه دیگری ایزوله کنند

- **باید** از رویدادهای `visibilitychange` پشتیبانی کنند

- **باید** از `window.navigator.language` پشتیبانی کنند

- **باید** از `window.location.href` پشتیبانی کنند اما نمی‌توانید چیز خاصی درباره
  بخش پروتکل یا دامنه URL مشخص یا فرض کنید.

- **باید** از لینک‌های HTML مانند `<a href="localfile.html">` پشتیبانی کنند

- **باید** از لینک‌های `mailto` مانند `<a href="mailto:addr@example.org?body=...">` پشتیبانی کنند

- **باید** از `<meta name="viewport" ...>` پشتیبانی کنند، که مخصوصاً مفید است زیرا وب‌ویوهای پلتفرم‌های مختلف پیش‌فرض‌های متفاوتی دارند

- **باید** از `<input type="file">` برای اجازه وارد کردن فایل‌ها پشتیبانی کنند؛
  برای راهی برای صادر کردن فایل‌ها ببینید [`sendToChat()`](../specification/sendToChat).


### تعاملات رابط کاربری در چت‌ها

- متن از `update.info` **باید** در چت‌ها نشان داده شود
  و ضربه زدن روی آن‌ها **باید** برنامه webxdc را مستقیماً باز کند.
  اگر `update.href` تنظیم شده باشد آنگاه برنامه webxdc **باید**
  با URL ریشه وب‌ویو و مقدار `update.href` الحاق شده شروع شود.

- آخرین متن از `update.document`
  و `update.summary` **باید** داخل پیام webxdc
  همراه با نام و آیکون نمایش داده شوند.
  فقط یک خط متن **باید** نمایش داده شود و قطع کردن مشکلی ندارد
  زیرا توسعه‌دهندگان برنامه webxdc **نباید** تشویق به ارسال متن‌های طولانی در اینجا شوند.

- دکمه «شروع» **باید** ارائه شود که برنامه webxdc را اجرا کند.
  توجه داشته باشید که نیازی به درخواست رضایت «حریم خصوصی» یا «کوکی» نیست زیرا
  هیچ راهی وجود ندارد که یک برنامه webxdc به‌طور ضمنی داده‌های کاربر را به اینترنت منتقل کند.


### نمونه‌های پیاده‌سازی پیام‌رسان

- [Delta Chat Android با استفاده از Java](https://github.com/deltachat/deltachat-android/blob/master/src/org/thoughtcrime/securesms/WebxdcActivity.java)

- [Delta Chat iOS با استفاده از Swift](https://github.com/deltachat/deltachat-ios/blob/master/deltachat-ios/Controller/WebxdcViewController.swift)

- [Delta Chat Desktop با استفاده از TypeScript](https://github.com/deltachat/deltachat-desktop/blob/786b7514d69ffb723bbe6e706494852a2641bfcd/src/main/deltachat/webxdc.ts)

