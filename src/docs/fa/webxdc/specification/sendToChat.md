---
title: sendToChat
description: مستندات sendToChat برای webxdc.
category: مشخصات
---

# sendToChat

```js
let promise = window.webxdc.sendToChat(message);
```

`sendToChat()` به یک برنامه webxdc اجازه می‌دهد پیامی آماده کند
که سپس توسط کاربر به یک چت ارسال شود.
پیاده‌سازی‌ها ممکن است از کاربر چت مقصد را بپرسند
و سپس پیام را به عنوان پیش‌نویس تنظیم کنند،
تا مشخص باشد که پیام خروجی نتیجه تعامل کاربر است.

`message` یک آبجکت است با `file`، `text` یا هر دو تنظیم شده:

- `message.file`: فایل برای ارسال، `name` و **یکی از** `blob`، `base64` یا `plainText` را تنظیم کنید:

  - `message.file.name`: نام فایل، شامل پسوند
  - `message.file.blob`: JavaScript `Blob`، همچنین نوع‌های ارثی مانند `File` را قبول می‌کند
  - `message.file.base64`: داده رمزگذاری شده base64
  - `message.file.plainText`: متن برای فایل متنی، به صورت utf-8 رمزگذاری خواهد شد

- `message.text`: متن پیام برای ارسال

متن معمولاً می‌تواند توسط کاربر ویرایش شود و
کاربر ممکن است تصمیم بگیرد متن را بدون فایل ارسال کند
یا ارسال را کلاً لغو کند.
این تصمیمات کاربر به برنامه webxdc گزارش نمی‌شوند.

برای اینکه کاربر روی ارسال پیام تمرکز کند،
فراخوانی این تابع ممکن است کنترل را به برنامه اصلی بازگرداند
و از برنامه webxdc خارج شود.
promise ممکن است قبل از خروج resolve شود یا نشود.

در صورت خطا،
برنامه خارج نخواهد شد و promise رد خواهد شد.

مثال:

```js
window.webxdc.sendToChat({
    file: {base64: "aGVsbG8=", name: "hello.txt"},
    text: "This file was generated by GreatApp"
}).catch((error) => {
    console.log(error);
});
```

نکات:

- برای ارسال فایل خالی، یک رشته خالی یا blob را به عنوان داده تنظیم کنید.
  تعیین نکردن هیچ داده‌ای خطاست.
  این برای پیاده‌کنندگان پیام‌رسان نیز مهم است،
  که باید مثلاً `typeof message.file.base64 === "string"` را بررسی کنند
  و نه `!message.file.base64` که فایل‌های خالی را مجاز نمی‌کند.

- اگر می‌خواهید متن ارسال کنید از `btoa()` استفاده نکنید،
  بلکه مستقیماً از `message.file.plainText` استفاده کنید،
  زیرا [`btoa()` با برخی یونیکد/ایموجی‌ها مشکل دارد](https://developer.mozilla.org/en-US/docs/Web/API/btoa#unicode_strings)


