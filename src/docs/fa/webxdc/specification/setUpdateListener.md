---
title: setUpdateListener
description: مستندات setUpdateListener برای webxdc.
category: مشخصات
---

# setUpdateListener

```js
let promise = window.webxdc.setUpdateListener((update) => {}, serial);
```

با `setUpdateListener()` شما یک callback تعریف می‌کنید که به‌روزرسانی‌های
ارسال شده توسط [`sendUpdate()`] را دریافت می‌کند. callback برای به‌روزرسانی‌های ارسال شده توسط شما یا همتاهای دیگر فراخوانی می‌شود.
`serial` آخرین سریالی را مشخص می‌کند که از آن خبر دارید (پیش‌فرض 0).
promise برگشتی زمانی resolve می‌شود که listener تمام پیام‌های به‌روزرسانی شناخته شده در زمان فراخوانی `setUpdateListener` را پردازش کرده باشد.


## آبجکت به‌روزرسانی برنامه

هر `update` که به callback ارسال می‌شود دارای خصوصیات زیر است:

- `update.payload`: برابر با payload داده شده به [`sendUpdate()`]

- `update.serial`: شماره سریال این به‌روزرسانی.
  سریال‌ها بزرگتر از `0` هستند و سریال‌های جدیدتر اعداد بزرگتری دارند.
  ممکن است فاصله‌هایی در سریال‌ها وجود داشته باشد
  و تضمین نمی‌شود که سریال بعدی دقیقاً یک واحد افزایش یابد.

- `update.max_serial`: حداکثر سریال شناخته شده فعلی.
  اگر `max_serial` برابر `serial` باشد، این به‌روزرسانی آخرین به‌روزرسانی است (تا رسیدن پیام‌های شبکه جدید).

- `update.info`: اختیاری، پیام اطلاعاتی کوتاه (ببینید [`sendUpdate()`])

- `update.href`: مرجع «لینک عمیق» درون‌برنامه‌ای
  که می‌تواند به‌صورت اختیاری توسط فرستنده به‌روزرسانی از طریق [`SendUpdate()`] ارائه شود.

- `update.document`: اختیاری، نام سند تنظیم شده توسط فرستنده، (ببینید [`sendUpdate()`]).
  پیاده‌سازی‌ها نام سند را مثلاً کنار آیکون برنامه یا در نوار عنوان نشان می‌دهند.
  نیازی نیست گیرنده این اطلاعات را بیشتر پردازش کند.

- `update.summary`: اختیاری، متن کوتاه، نمایش داده شده کنار آیکون (ببینید [`sendUpdate()`])

- `update.notify`: اختیاری، لیست آدرس‌های کاربرانی
  که فرستنده قصد اطلاع‌رسانی به آن‌ها را دارد

فراخوانی `setUpdateListener()` چندین بار رفتار تعریف‌نشده دارد: در پیاده‌سازی‌های فعلی فقط آخرین فراخوانی کار می‌کند.

[`sendUpdate()`]: ./sendUpdate.html
