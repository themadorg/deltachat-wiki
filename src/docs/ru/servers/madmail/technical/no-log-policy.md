---
title: Политика отсутствия логов
description: Технические подробности того, как Madmail соблюдает политику приватности «No Log».
category: Техническая часть
---

# Политика отсутствия логов (No Log Policy)

## Обзор
Chatmail разработан с четким приоритетом на приватность. Эта политика гарантирует, что на сервере не сохраняются постоянные логи, содержащие чувствительные метаданные (адреса отправителей/получателей, временные метки, попытки аутентификации), когда эта политика активна.

## Техническая реализация

### Глобальная конфигурация
Логирование можно отключить глобально в `maddy.conf`, используя директиву `log`:
```hcl
log off
```
Когда установлено значение `off`, сервер использует бэкенд `NopOutput`, который немедленно отбрасывает все события логирования. Файлы логов не создаются, а вывод не отправляется в `stderr` или `syslog`.

### Динамическое переключение логирования
Логирование также можно переключать динамически через базу данных настроек. Это позволяет администраторам отключать логи без перезапуска сервиса.

- **Команды переключения**:
  ```bash
  maddy creds logging off  # Немедленно отключает логирование
  maddy creds logging on   # Включает логирование (требуется перезапуск сервиса для полного эффекта)
  ```
- **Бэкенд базы данных**: Статус хранится в таблице `settings` под ключом `__LOG_DISABLED__`.

### Меры защиты приватности
1.  **Отсутствие хранения**: Когда логирование отключено, система не создает файловых дескрипторов для целей записи логов.
2.  **Защита метаданных**: Это предотвращает накопление долгосрочных журналов аудита, которые могли бы быть использованы для реконструкции паттернов общения пользователей.
3.  **Фаза загрузки**: В системный журнал (stdout/stderr) во время фазы загрузки выводятся только критические ошибки инициализации, препятствующие запуску сервера. Как только сервер инициализирован, в действие вступает политика «No Log».

## Проверка
Чтобы убедиться, что логи не создаются:
- Убедитесь, что директория `/var/log/maddy/` (или настроенная вами директория для логов) пуста.
- Запустите `journalctl -u maddy` и подтвердите, что после сообщения «Listening for incoming connections...» новые события в логах не появляются.
