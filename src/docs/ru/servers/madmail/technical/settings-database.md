---
title: База данных настроек
description: Технический обзор таблиц динамической конфигурации и хранилища метаданных в Madmail.
category: Техническая часть
---

# База данных настроек Madmail

Madmail использует специальные SQL-таблицы для хранения динамической конфигурации и пользовательских метаданных. Это позволяет серверу изменять свое поведение (например, открывать регистрацию или отключать логи) без необходимости перезапуска или изменения конфигурационного файла.

## Таблица настроек (`settings`)

Таблица `settings` представляет собой простое хранилище «ключ-значение», используемое для общесерверных флагов. В `maddy.conf` она обычно настраивается через директиву `settings_table` как в `auth.pass_table`, так и в `storage.imapsql`.

| Ключ | Тип значения | Описание |
| :--- | :--- | :--- |
| `__REGISTRATION_OPEN__` | Boolean (`true`/`false`) | Определяет, будут ли новые учетные записи создаваться автоматически при доставке SMTP или через эндпоинт регистрации chatmail. |
| `__TURN_ENABLED__` | Boolean (`true`/`false`) | Определяет, активен ли функционал TURN-сервера для пользователей. |
| `__LOG_DISABLED__` | Boolean (`true`/`false`) | Если установлено в `true`, сервер динамически отключает логирование в стандартный поток ошибок/файлы (используя `log.NopOutput`). |

## Таблица квот (`quota`)

Таблица `quota` управляет ограничениями хранилища для пользователей и глобальными значениями по умолчанию.

| Имя пользователя | Описание |
| :--- | :--- |
| `__GLOBAL_DEFAULT__` | Специальная запись, устанавливающая квоту по умолчанию для всех пользователей сервера, если для них не определена индивидуальная квота. |
| *[имя_пользователя]* | Хранит лимит `MaxStorage` (в байтах) для конкретного пользователя. |

## Другие таблицы

- **`contacts`**: хранит ссылки для обмена контактами DeltaChat (слаг, URL, имя).
- **`passwords`**: хранит учетные данные пользователей и хешированные пароли.
- **`msgs` / `mboxes` / `users`**: основные таблицы IMAP, управляемые движком хранилища.
